<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Quiz AI Generate with Gemini" />
    <meta name="keywords" content="AI Generate, Free, Quiz," />
    <meta name="author" content="DP12-First-Project" />
    <meta name="robots" content="index, follow" />
    <title>Quiz AI Generate with Gemini</title>

    <link rel="stylesheet" href="../css/index.css" />
  </head>

  <body>
    <header>
      <div class="header-top">
        <div class="ai-logo">
          <img src="../ai.webp" onclick="window.location.href='index.html'" alt="Ảnh AI" />
        </div>
        <div class="header-content">
          <h1>AI Generate with Gemini</h1>
          <div class="button-group">
            <button class="btn3" id="show-quiz-form">Generate Quiz by AI</button>
            <button class="btn2" onclick="displaySavedQuizzes()">Quiz history</button>
            <button class="btn1" onclick="clearStorage()">Delete history</button>
          </div>
        </div>
      </div>
    </header>

    <main>
      <div id="quiz-popup" class="modal">
        <div class="modal-content">
          <input type="text" id="prompt" placeholder="Type a subject to generate a quiz" class="quiz-input" />
          <div class="quiz-options">
            <select aria-label="questions" id="question-count">
              <option value="5">5 questions</option>
              <option value="10">10 questions</option>
              <option value="15">15 questions</option>
              <option value="20">20 questions</option>
            </select>
            <select aria-label="difficulty" id="difficulty">
              <option value="easy">Easy</option>
              <option value="medium">Medium</option>
              <option value="hard">Hard</option>
            </select>
            <select aria-label="language" id="language">
              <option value="english">English</option>
              <option value="vietnamese">Vietnamese</option>
            </select>
          </div>
          <div class="button-action">
            <button type="submit" onclick="generateQuiz()" class="quiz-btn">Generate Quiz</button>
            <button type="button" onclick="closeQuizPopup()" class="close-btn">Back</button>
          </div>
        </div>
      </div>

      <div id="alert-popup" class="popup">
        <div class="popup-content">
          <span id="alert-popup-icon">ℹ️</span>
          <span id="alert-popup-content"></span>
        </div>
      </div>

      <div id="saved-quiz-wrapper">
        <h3 id="saved-quiz-title">Generated Quiz</h3>
        <div id="saved-quiz-container"></div>
      </div>

      <div id="quiz-container"></div>

      <div id="confirm-popup" class="popup">
        <div id="popup-content" class="popup-content"></div>
      </div>
    </main>

    <div class="footer-container">
      <p>© 2025 DP12-Team 8. All rights reserved.</p>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const modal = document.getElementById('quiz-popup')
        const btn = document.getElementById('show-quiz-form')
        const closeBtn = document.querySelector('.close-btn')
        btn.onclick = function () {
          modal.style.display = 'flex'
        }
        closeBtn.onclick = function () {
          modal.style.display = 'none'
        }
      })
      document.addEventListener('DOMContentLoaded', function () {
        const quizCards = document.querySelectorAll('.quiz-card')
        quizCards.forEach((card) => {
          const actions = card.querySelector('.quiz-actions')
          if ('ontouchstart' in window || navigator.maxTouchPoints) {
            card.addEventListener('click', function (event) {
              event.stopPropagation()
              if (actions.style.display === 'block') {
                actions.style.display = 'none'
              } else {
                document.querySelectorAll('.quiz-actions').forEach((el) => {
                  el.style.display = 'none'
                })
                actions.style.display = 'block'
              }
            })
            document.addEventListener('click', function () {
              actions.style.display = 'none'
            })
          }
        })
      })
    </script>
    <script type="module" src="../js/script.js"></script>
  </body>
</html>
